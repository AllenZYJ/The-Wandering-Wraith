<html><head><style>body{margin:0;background:#000}*{font-weight:300}canvas{width:100%;height:100%;cursor:none;image-rendering:crisp-edges}svg{display:none}tt{font-size:80px;font-weight:800;margin-top:100px;margin-bottom:10px;background:-webkit-linear-gradient(#fff,#4376fd);text-shadow:0 0 5px #fff;-webkit-background-clip:text;-webkit-text-fill-color:transparent;border-bottom:2px solid grey;padding-bottom:16px;letter-spacing:6px}ts{font-size:35px;color:grey;margin-bottom:150px;font-weight:400;text-shadow:0 0 3px grey}t{position:absolute;background-color:#000;width:100%;height:100%;color:#faebd7;display:flex;flex-direction:column;align-items:center;opacity:.7;text-align:center}l{display:block;line-height:80px;font-size:30px}h1,w{font-size:50px}button{display:block;margin-bottom:30px;padding:15px 50px;background:#000;border:none;color:#fff;font-size:40px;transition:.3s ease-in-out;cursor:pointer;width:100%}button:hover{font-size:45px}.r{display:none!important}h{font-size:20px;color:grey}</style></head><body><t><tt class=t>The Wandering Wraith</tt><ts class=t>...or the grand venture of going back to the grave.</ts><w>Loading...</w><div id=o class=r><button id=c>Continue</button> <button id=n>New game</button></div><div id=f class=r><h1>THE END</h1><l>The wraith found his peace back in the grave.</l><l>Collected <span id=p></span>/51 crystals</l><l>Died <span id=d></span> times</l><h>Press ESC to continue</h></div><div id=r class=r><h1>A js13k challenge by</h1><h2>Mateusz Tomczyk</h2><h3>Thanks to Frank Force for ZzFX</h3><h>Press ESC to continue</h></div></t><canvas></canvas><svg xmlns="http://www.w3.org/2000/svg" id="head" width="40" height="40" version="1.1" viewBox="0 0 10.6 10.6"><path fill="#e6e6e6" d="M.938 287.49l1.528.481c1.735-1.247 3.446-2.322 4.808-.142.89 1.262.842 2.886.538 4.074l-1.782 1.216c-4.897-.962-4.069-3.56-5.092-5.629z" transform="translate(.113 -279.07) scale(.97464)"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="eyes" width="10" height="10" version="1.1" viewBox="0 0 2.6 2.6"><g transform="translate(-9.4 -506.59) scale(1.7512)"><ellipse cx="-42.9" cy="286.9" opacity=".5" rx=".3" ry=".5" transform="rotate(-9.621)"/><ellipse cx="65.9" cy="282.5" opacity=".5" rx=".3" ry=".5" transform="rotate(11.84)"/></g></svg> <svg xmlns="http://www.w3.org/2000/svg" id="torso" width="40" height="40" version="1.1" viewBox="0 0 10.6 10.6"><path fill="#ccc" d="M4.453 291.64c-.092.702.024 2.137-.37 2.765l3.01.055c-.395-.486-.529-1.83-.363-2.774z" transform="translate(0 -286.42)"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="limb" width="5" height="15" version="1.1" viewBox="0 0 1.3 4"><path fill="#e6e6e6" d="M.026 293.03l1.295.036-.398 3.533c-.142.225-.234.737-.542-.015z" transform="translate(0 -293.03)"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="scaffold" width="80" height="140" version="1.1" viewBox="0 0 21.2 37"><path fill="#1a1a1a" stroke-width=".1" d="M9.95.568l.815.9-8.88 9.407-.816-.9zM1.88.532H15.22v1.042H1.88zm-1.447 0h1.448v35.723H.433z"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="hangman" width="80" height="110" version="1.1" viewBox="0 0 21.2 29.1"><path fill="#1a1a1a" d="M3.408 4.41c.927.42 1.429 1.138 1.12 1.817-.307.68-.938.803-1.865.383S1.038 5.342 1.346 4.662c.308-.68 1.135-.672 2.062-.252zm2.934 3.028l.634 1.397-.215 5.571-.386 1.286-.322-1.297-.158-5.514-.1 4.066-.594 9.005-.133 2.303-.708-2.303-.824-7.765-.265 7.835-.355 2.17-.531-2.214-.842-8.013.133-5.271-.664 5.404-.488 1.462-.25-1.543.423-5.665.89-1.335L4.2 5.983zM3.89-.034h.31v5.157l-.31-.24z"/></svg><script>!function(t){var s={};function i(h){if(s[h])return s[h].t;var e=s[h]={s:h,i:!1,t:{}};return t[h].call(e.t,e,e.t,i),e.i=!0,e.t}i.h=t,i.c=s,i.d=function(t,s,h){i.o(t,s)||Object.defineProperty(t,s,{l:!0,get:h})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i.M=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.u)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{l:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(h,e,function(s){return t[s]}.bind(null,e));return h},i.n=function(t){var s=t&&t.u?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.m="",i(i.p=1)}([function(t,s){zzfx_v=.5,zzfx_x=new AudioContext,zzfx=(t,s,i,h=1,e=.1,n=0,o=0,r=0,c=0)=>{let a=44100,l=Math.PI;i*=2*l/a,i*=1+s*(2*Math.random()-1),n*=1e3*l/a**2,e*=0|(h=0<h?a*(10<h?10:h)|0:1),r*=2*l/a,c*=l,s=[];for(var d=0,f=0,u=0;u<h;++u)s[u]=t*zzfx_v*Math.cos(d*i*Math.cos(f*r+c))*(u<e?u/e:1-(u-e)/(h-e)),d+=1+o*(2*Math.random()-1),f+=1+o*(2*Math.random()-1),i+=n;return t=zzfx_x.createBuffer(1,h,a),i=zzfx_x.createBufferSource(),t.getChannelData(0).set(s),i.buffer=t,i.connect(zzfx_x.destination),i.start(),i}},function(t,s,i){"use strict";i.r(s);class h{constructor(t=0,s=0){this.x=t,this.y=s}v(){return new h(this.x,this.y)}C(){return this.x=0,this.y=0,this}_(t){const s=this.x*Math.cos(t)-this.y*Math.sin(t),i=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=s,this.y=i,this}B(t){return this.x+=t.x,this.y+=t.y,this}g(t){return this.x-=t.x,this.y-=t.y,this}P(){const t=Math.sqrt(this.x*this.x+this.y*this.y);return t?(this.x/=t,this.y/=t,this):this.C()}k(t){return this.x*=t,this.y*=t,this}S(t){return this.x*t.x+this.y*t.y}V(){return Math.sqrt(this.x*this.x+this.y*this.y)}H(){return Math.PI-Math.atan2(-this.x,-this.y)}A(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}O(t){return Math.PI-Math.atan2(this.x-t.x,this.y-t.y)}G(t){return Math.acos(this.S(t)/(this.V()*t.V()))||0}}class e{constructor(t){this.T=t%2147483647,this.T<=0&&(this.T+=2147483646)}j(){return this.T=16807*this.T%2147483647}L(){return(this.j()-1)/2147483646}R(){return this.L()-.5}}function n(t,s,i,n,o,r,c){const a=new e(r);var l=t.createLinearGradient(0,0,0,s);l.addColorStop(.5,"#151515"),l.addColorStop(1,"#000"),t.strokeStyle=l,function t(s,i,e,n,o,r,c,a,l){const d=Math.PI/2;const f=d-r;r+=(1+1.2*f*(Math.sin(a)+2))/n*l;const u=new h(0,-1)._(r).k(c);const M=e.v().B(u);i.beginPath();i.lineWidth=Math.pow(n,.9);i.moveTo(e.x,e.y);i.lineTo(M.x,M.y);i.stroke();i.closePath();n>=1&&(t(s,i,M,n-1,o*(1+(s.L()-.5)/3),r+o,c*Math.min(s.L()+.4,.8),a,l),t(s,i,M,n-1,o*(1+(s.L()-.5)/3),r-o,c*Math.min(s.L()+.4,.8),a,l))}(a,t,new h(s/2,s),i,n,0,o,c,1/Math.pow(i,1.5))}async function o(t,s,i,h,e){const o=s*h/1.5;return t.D(o,o),c(t,30,(t,r)=>n(t,o,s,i,h,e,r))}function r(t,s,i){return t.D(50,50),c(t,15,(t,n)=>(function(t,s,i,n){const o=new e(i);var r=t.createLinearGradient(0,0,0,50);r.addColorStop(0,"#111"),r.addColorStop(1,"#000"),t.strokeStyle=r,t.lineWidth=.2;for(let i=0;i<10;i++){let i=new h(o.j()%10+20,50);t.beginPath(),t.moveTo(i.x,i.y);let e=(o.L()+.5)/10,r=0;const c=(o.L()+1)*s;for(let s=0;s<10;s++){const s=new h(0,-1)._(r).k(c);i=i.v().B(s),t.lineTo(i.x,i.y),r+=e+Math.sin(n)/30}t.stroke(),t.closePath()}})(t,s,i,n))}async function c(t,s,i){const h=[],e=Math.PI/s;let n=Math.PI/2;for(let o=0;o<s;o++)n=n+=e,h.push(await t.F(t=>i(t,n)));return h}class a{constructor(){this.$=document.createElement("canvas"),this.W=this.$.getContext("2d")}D(t,s){this.$.width=t,this.$.height=s}async F(t){return new Promise((s,i)=>{t(this.W);const h=new Image;h.onload=()=>s(h),h.src=this.$.toDataURL(),this.N()})}N(){this.W.clearRect(0,0,this.$.width,this.$.height)}}const l=1,d=2,f=4;function u(t){return new Promise((s,i)=>{const h=document.getElementById(t),e=(new XMLSerializer).serializeToString(h),n="data:image/svg+xml;base64,"+btoa(e),o=new Image;o.onload=()=>s(o),o.src=n})}const M={};async function w(){M.I=await u("head"),M.q=await u("eyes"),M.J=await u("torso"),M.X=await u("limb"),M.K=await u("scaffold"),M.U=await u("hangman"),M.Y=await async function(){const t=new e(1),s=new a,i=[];for(let h=4;h<11;h++)i.push({frames:await o(s,h,t.L()/4+.3,5*h,h),Z:25*Math.pow(h,1.3),mask:f});for(let t=0;t<4;t++)i.push({frames:await r(s,1+.5*t,t),Z:5+t,mask:d});return i}(),M.tt={st:[.6,1,200,.1,.47,4.2,1.4,1,.15],it:[.6,1,150,.15,.47,4.2,1.4,1,.25],ht:[.4,.6,50,.02,.54,4,.9,10.7,.37],et:[.8,.7,450,.5,.21,11.3,.8,7,.56],nt:[1,.1,304,.2,.01,0,.3,0,.5],collect:[.8,0,10,.2,.88,1,.3,10,.41],ot:[1,.1,428,.2,.31,0,.2,5.1,.42]}}class m{constructor(t,s,i){this.rt=t,this.ct=s,this.at=i}lt(t){this.dt||(this.dt=t);const s=t-this.dt,i=(this.ct-this.rt)/this.at,h=this.rt+s*i;return h>this.ct?null:Math.sin(h)}}class p{constructor(){this.ft=new Map}ut(t,s){this.ft.set(t,s)}lt(t){for(const[s,i]of this.ft.entries()){const h=s.lt(t);null!==h?i(h):this.ft.delete(s)}}}const v=100;function z(t,s){return 1e4*t+s}function C(t,s,i){const h=t.A(i),e=s.A(i),n=t.A(s);return h+e>=n-.1&&h+e<=n+.1}function y(t,s,i,e){const n=((e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x))/((e.y-i.y)*(s.x-t.x)-(e.x-i.x)*(s.y-t.y)),o=((s.x-t.x)*(t.y-i.y)-(s.y-t.y)*(t.x-i.x))/((e.y-i.y)*(s.x-t.x)-(e.x-i.x)*(s.y-t.y));return n>=0&&n<=1&&o>=0&&o<=1?new h(t.x+n*(s.x-t.x),t.y+n*(s.y-t.y)):null}function*_(t,s){const i=Math.floor(Math.min(t.x,s.x)/v),h=Math.ceil(Math.max(t.x,s.x)/v),e=Math.floor(Math.min(t.y,s.y)/v),n=Math.ceil(Math.max(t.y,s.y)/v);for(let t=i;t<=h;t++)for(let s=e;s<=n;s++)yield z(t,s)}function b(t,s,i,e){const n=i.A(e),o=((t.x-i.x)*(e.x-i.x)+(t.y-i.y)*(e.y-i.y))/Math.pow(n,2);let r=new h(i.x+o*(e.x-i.x),i.y+o*(e.y-i.y));if(!C(i,e,r))if(t.A(i)<=s)r=i;else{if(!(t.A(e)<=s))return null;r=e}const c=s-t.A(r);return c<0?null:[r.v().g(t).P().k(c),r]}class B{constructor(){this.Mt=new Map,this.wt=[]}pt(t){this.wt.push(t);for(const s of _(t.vt,t.zt))this.Mt.has(s)?this.Mt.get(s).push(t):this.Mt.set(s,[t]);return t}Ct(){this.wt=[],this.Mt.clear()}*yt(t){t._t=[];const s=new Set;for(const i of function*(t,s){const i=Math.floor((t.x-s)/v),h=Math.ceil((t.x+s)/v),e=Math.floor((t.y-s)/v),n=Math.ceil((t.y+s)/v);for(let t=i;t<=h;t++)for(let s=e;s<=n;s++)yield z(t,s)}(t.bt,t.Bt))for(const h of this.Mt.get(i)||[])if(!s.has(h)){s.add(h);const i=b(t.bt,t.Bt,h.vt,h.zt);i&&(yield{gt:h,Pt:t,kt:i[0],xt:i[1]})}}St(t,s){const i=_(t,s),h=[];for(const e of i)if(this.Mt.has(e))for(const i of this.Mt.get(e)){const e=y(t,s,i.vt,i.zt);e&&h.push(e)}return h.length?h.sort((t,s)=>t.y-s.y)[0]:null}}class g{constructor(){this.Vt=100}async Ht(t){this.At=[];for(let s=0;s<=2*t.Gt.Ot.x;s+=this.Vt)this.At.push([]);const s=new e(t.Tt.Gt+2);for(const i of M.Y){let e=s.L()*i.Z;for(;e<t.Gt.Ot.x;){e+=i.Z+i.Z*(s.L()-.5);const n=this.At[Math.floor(e/this.Vt)],o=this.jt(t,e,i.mask);for(const t of o)if(t){const e=s.L()>.8;n.push({bt:t.B(new h(0,(e?5:0)+5*s.L())),Lt:i,Rt:e})}}}}*jt(t,s,i){const e=_(new h(s,-1e3),new h(s,t.Gt.Ot.y)),n=new Set,o=t.Dt.Mt,r=new Set;for(const t of e)if(o.has(t))for(const s of o.get(t))r.has(s)||(r.add(s),n.add([s.vt,s.zt,!!(s.Ft&i)]));let c=[];for(const[t,i,e]of n){const n=i.v().g(t),o=n.y/n.x,r=t.y-o*t.x,a=new h(s,o*s+r);c.push([t,i,a,o,e])}c.sort((t,s)=>t[2].y-s[2].y);let a=!0;for(const[t,s,i,h,e]of c)C(t,s,i)&&(e&&i.y>0&&Math.abs(h)<1.5&&a&&(yield i),a=!a)}}class P{constructor(t){this.$t=t,this.Wt=[]}lt(){for(const t of this.Wt)if(t.bt.B(t.Nt),t.Nt.y+=.03,this.$t.It>t.qt+t.Et){const s=this.Wt.indexOf(t);this.Wt.splice(s,1)}}Jt(t){for(let s=0;s<t.count;s++){const s=t.Xt.v()._((Math.random()-.5)*Math.PI*2).k(.3*(Math.random()+.5)),i={qt:this.$t.It,bt:t.bt.v(),Nt:s,Et:t.Et*(Math.random()+.5)*5};this.Wt.push(i)}}}i(0);class k{constructor(t,s){this.Dt=t,this.Kt=s,this.Xt="r",this.Qt=3.5,this.Ut=4,this.Yt=0,this.Zt=0,this.ts=!1,this.ss=0,this.hs=0,this.es=0,this.ns=.25,this.os=0}get rs(){return this.Kt.rs}lt(){if(this.Kt.cs)return;const t=this.rs;if(this.as(),this.os&&this.Kt.$t.It-this.os>3500&&(this.ns=.25,this.rs.bt.y+=20,this.os=0),t.ls=t.bt.v(),0===this.ss){t.bt.x+=t.Nt.x;const s=this.Dt.St(new h(t.bt.x,t.bt.y-20*(this.ns>0?1:-1)),new h(t.bt.x,t.bt.y+20*(this.ns>0?1:-1)));s&&(t.bt.y=s.y-t.Bt*(this.ns>0?1:-1)),this.Kt.ds&&(this.rs.Nt.x>0?"r":"l")===this.Xt||(t.Nt.x*=.5),t.Nt.y=0}1===this.ss&&(t.Nt.y+=this.ns,t.Nt.x*=.94,t.bt.B(t.Nt)),2===this.ss&&t.Nt.C(),3===this.ss&&(t.bt.B(t.Nt),zzfx(.06,.1,200*Math.sin(t.Nt.y/5)+100,.15,.51,5,2,0,.09),this.Kt.$t.Wt.Jt({count:3,Xt:new h(3,0),Et:120,bt:t.bt}));const s=t.Bt,i=Math.min(t.Nt.V(),s);if(t.Nt=t.Nt.P().k(i),2!==this.ss){const s=Array.from(this.Dt.yt(t));s.length&&(1===this.ss&&this.Kt.$t.It-this.Zt>150&&(zzfx(...M.tt.nt),this.Kt.fs=Math.min(1,1/Math.abs(t.Nt.y)/8+.7)),3===this.ss&&this.us());for(const i of s){t._t.push(i.xt),i.gt.Ms&&this.Kt.ws();const s=i.xt.y-t.bt.y;if((this.ns>0?s<=this.Ut:s>=-this.Ut)&&t.bt.g(i.kt),1===this.ss){const s=t.bt.v().g(t.ls),i=t.Nt;t.Nt.x=Math.abs(i.x)<Math.abs(s.x)?i.x:s.x,t.Nt.y=Math.abs(i.y)<Math.abs(s.y)?i.y:s.y}}}t.bt.x=Math.max(0,t.bt.x)}as(){if(this.ms=null,3===this.ss){if(!(this.Kt.$t.It-this.hs>1700))return;this.us()}for(const t of this.rs._t){const s=(t.y-this.rs.bt.y)*(this.ns>0?1:-1),i=t.x-this.rs.bt.x;if(s>this.Ut)return void(this.ss=0);Math.abs(s)<=this.Ut&&(this.ms=i)}if(this.ms){const t=this.Kt.$t.vs.ps;if(this.ms<0&&t.get("ArrowLeft")||this.ms>0&&t.get("ArrowRight"))return 2!==this.ss&&(this.Yt=this.Kt.$t.It),this.ss=2,void(this.ts=!1)}1!==this.ss&&(this.Zt=this.Kt.$t.It,this.ss=1)}zs(t){if(3===this.ss)return void this.rs.Nt._(t/13);this.Kt.ds=0===this.ss;let s=.3;0===this.ss&&(s=.2);const i=t*s;Math.abs(this.rs.Nt.x+i)<this.Qt&&(this.rs.Nt.x+=i),this.Xt=t<0?"l":"r",this.Kt.Cs()}it(){if((0===this.ss||2===this.ss||1===this.ss&&this.Kt.$t.It-this.Zt<150)&&this.Kt.$t.It-this.Yt>151)return this.rs.Nt.y=5,2===this.ss&&(this.rs.Nt.x=-this.ms/3,this.rs.Nt.y=5),this.rs.Nt.y*=this.ns>0?-1:1,this.rs._t=[],this.Yt=this.Kt.$t.It,this.ts=!1,void zzfx(...M.tt.it);1===this.ss&&!this.ts&&this.Kt.$t.It-this.Yt>300&&(this.rs.Nt.y=5*(this.ns>0?-1:1),this.ts=!0,zzfx(...M.tt.st)),3===this.ss&&this.Kt.$t.It-this.Yt>150&&this.us()}ys(t){3===this.ss?this.us():(this.rs.Nt=new h(0,-5),this.rs.bt.x=t.bt.x,this.rs.bt.y=t.bt.y),this.ss=3,this._s=t,this.hs=this.Kt.$t.It,this.Yt=this.Kt.$t.It}us(){this.ss=1,this.ts=!1,this.Yt=this.Kt.$t.It,this.Kt.$t.Wt.Jt({count:250,Xt:new h(8,0),Et:80,bt:this.rs.bt});const t=this._s;this._s=null,zzfx(...M.tt.ot),setTimeout(()=>t.bs=!1,1e3)}Bs(){this.ns=-.25,this.ts=!1,this.os=this.Kt.$t.It}}function x(){return JSON.parse(localStorage.getItem("tul_s"))||{Gt:0,bt:null,gs:{}}}function S(t){localStorage.setItem("tul_s",JSON.stringify(t))}function V(t,s,i){return(1-i)*t+i*s}class H{constructor(t,s){this.$t=t,this.Ps=90,this.ks=0,this.xs=0,this.Ss=new h(1,1),this.cs=!0,this.Vs={Hs:0,As:-1,Os:1,Gs:0,Ts:0,js:1,Ls:-15,Rs:1},this.ds=!1,this.fs=1,this.Ds(s),this.Dt=new k(t.Dt,this)}Fs(){this.$t.ft.ut(new m(Math.PI/2,2.5*Math.PI,200),t=>this.Vs.js=(t+1)/2)}$s(){if(this.cs||this.$t.Ns.Ws)return;const t=this.$t.vs;t.ps.get("Space")&&this.Dt.it(),2!==this.Dt.ss&&(t.ps.get("ArrowLeft")&&this.Dt.zs(-1),t.ps.get("ArrowRight")&&this.Dt.zs(1))}Is(){this.Vs.Gs=0,this.Vs.Ts=0,this.Vs.As=-1,this.Vs.Os=1,Math.abs(this.Vs.Rs-this.fs)<.05&&(this.fs=1),this.Vs.Rs=V(this.Vs.Rs,this.fs,.3),this.ds&&(this.Vs.Gs=Math.sin(this.$t.It/30)/2,this.Vs.Ts=Math.cos(this.$t.It/30)/2),2===this.Dt.ss&&(this.Vs.Gs=-.6,this.Vs.Ts=-.7,this.Vs.As=-1.3,this.Vs.Os=-.7),this.$t.It-this.xs>100&&(this.xs=this.$t.It,this.rs.Nt.y>1?this.Vs.Ls=-11:this.rs.Nt.y<-1?this.Vs.Ls=-21:this.Vs.Ls=-15),1===this.Dt.ss&&(this.fs=1+Math.abs(this.rs.Nt.y/17),this.rs.Nt.y>.3?(this.Vs.As=Math.sin(this.$t.It/50)/3-1.5,this.Vs.Os=1.5+Math.cos(this.$t.It/50)/3,this.Vs.Gs=.3,this.Vs.Ts=-.3):(this.Vs.As=Math.sin(this.$t.It/200)/10-.7,this.Vs.Os=.7-Math.sin(this.$t.It/200)/10)),this.Vs.Hs=Math.sin(this.$t.It/200)-2,Math.random()>.99&&this.Fs()}Cs(){this.$t.It-this.ks>this.Ps&&(this.ks=this.$t.It,this.rs._t.length>0&&zzfx(...M.tt.ht))}lt(){this.ds=!1,this.$s(),this.Dt.lt(),this.qs(),this.Is()}qs(){const t=this.$t.Gt.Es;for(const[s,i]of t.entries())if(!i.bs&&i.bt.A(this.rs.bt)<i.Bt)switch(i.bs=!0,i.type){case 0:const t=this.$t.Tt;t.gs[t.Gt]||(t.gs[t.Gt]=[]),t.gs[t.Gt].push(s),zzfx(...M.tt.collect);break;case 1:this.Dt.Bs(),setTimeout(()=>i.bs=!1,5e3),zzfx(...M.tt.collect);break;case 2:this.Dt.ys(i)}}ws(){this.cs=!0,localStorage.setItem("tul_d",((parseInt(localStorage.getItem("tul_d"))||0)+1).toString()),this.$t.Wt.Jt({count:250,Xt:new h(5,0),Et:150,bt:this.rs.bt}),zzfx(...M.tt.et),setTimeout(()=>{this.$t.Js(x())},1e3)}Ds(t){this.cs=!1,this.rs={Bt:10,bt:t,ls:t.v(),Nt:new h,_t:[]}}}class A{constructor(t){this.Ns=t,this.ps=new Map}init(){window.addEventListener("keydown",t=>{this.ps.set(t.code,!0),"Escape"===t.key&&(1===this.Ns.Xs.mode?this.Ns.Xs.Ks():2===this.Ns.Xs.mode?this.Ns.Qs():this.Ns.Us())}),window.addEventListener("keyup",t=>{this.ps.set(t.code,!1)})}}class O{constructor(t,s={}){this.$t=t,this.Ys=!1,this.Ct=!1,this.Zs=!1,this.ti=1,O.si.push(this),Object.assign(this,s),this.$||(this.$=document.createElement("canvas")),this.W=this.$.getContext("2d")}ii(){this.Ys?(this.$.width=this.$t.Gt.Ot.x,this.$.height=1===this.ti?this.$t.Gt.Ot.y:this.$t.$.height):(this.$.width=this.$t.$.width,this.$.height=this.$t.$.height),this.hi()}hi(){this.W.clearRect(0,0,this.$.width,this.$.height)}ei(){const t=this.$t.ni;t.oi=this,t.W=this.W,this.Ct&&this.hi()}}O.si=[];const G=["400 70 0-2-6l14 1c12 5-19 13-8 34 25 3 25 6 48 1l15-2 0-3c6 0 12 4 32-1 2 4-4 5 0 11dl7 0dc4-8-3-4 0-11 9-4 14 0 23-1-1 8-6 8-3 13d13-5 7 4 21-1d2-5-4-5-1-10 17 4 78-1 81 2l0 13dc19 0 11 18 33 15d48 2 57-6 102 0l0-11c10-1 23 3 43 5l-1 21-406 1czzm253 26c10 2 16-6 18-2l0 7 9 0 0 9 10 0 0 10-18 0-19-15czzzC138 16C314 20C251 29C228 32C184 8C350 24dpv318 43dv309 43v165 24v184 18v350 36V318 31dV309 31dV217 21s158s295s91s347s223","450 130 0-1 111c28-4 63 7 102 1dl0-28dc32 7 26-4 74 0l-1 21dc32-10 134-15 177-2l0-28dc27 6 45-10 19-10l-27-1d0-9dc21-5 55 1 71-1l0-11c30 4 23-1 37 0l0 88-453 0czzm278 73c7 0 14-1 25 3l-6 4-19 0czm405 18l3 0c-2 7 4 9 0 20l-3 0czm105 58c4 2 6 0 12 2-1 6 3 7 0 14l-12-11czB95 105B183 88B226 77B254 76B324 71B344 91B226 56B255 55B241 65C40 97C54 87C45 93C240 36C291 71C240 56C371 69C427 16C263 21C213 22C134 55dpP409 27dh42 100h427 19H47 90v42 95v131 58V314 74s83s165s295s395","250 70 50-1 52l52 0 15 0dc45-13 95 12 113-18dl72 1 0 36-252 0czdm156-1l0 31dc-52-4-74 0-87 4-1-3 0-5 1-8d-5 1-9-2-15 0d-1 5 4 6 2 8l-20-1dc-24-3-36-17-36-35dzm229-1l0 3-7 0 0 4 7 0c0 7-2 11-7 11-5 0-7-4-14-18zB134 46C63 35C96 43C224 21C224 5C238 15C160 14G44 50G102 37ph222 24h158 16H96 40dH237 1dv81 35dv113 30dv236 14V127 33V222 17dV244 10ds93s198","400 120 0-1 59c19 1 28 8 50 2l51 1 1 33d11 0d0-28c44-5 42 5 83 4 5-19-18-25-17-34 18 4 19-2 26 0l-1 26 32 2dc9 12 0 19 34 20 25 0 41-3 40-14d-2-8-66-7-70-15l3-14c49 10 62-1 76 0d31 9 35 10 59 3dl24 0 0 76-402 0czm335 33l-10 3 0-9c13-6 16-2 22-2 20 1 35 24-1 8zzm47 37c11-2 27-1 28 0l-28 6czB181 65C299 72C379 13C67 23C69 43C110 71C110 90pP252 76P266 79P291 78P255 76P294 78P341 21P347 17P353 13dP60 22dP36 50dP102 85h365 20h103 63h110 76H376 8dv317 43dv274 75dv281 81v293 68v366 31v21 53v81 43dV287 79dV254 61dV378 40dV376 17dV361 23dV62 29s311s352s230s159s94","240 100-1-1 18c15 3 20-1 28 0-14 54-8 50 8 51d24-11 35-4 36-1 9 23 17 21 40 21 57-10 91-24 90-38-2-12 5-23 40-25dl0 75-242 0czm50-1dl191 0d0 11c-11 2-51 4-52 12-3 20-21 18-27 27-14 15-24 15-39 16-23 3-49-16-66-26zB38 55B75 59B104 81B141 67B197 28B177 63C38 33C38 43C38 23C104 66ph105 69dH195 44dv211 17v211 33dV100 62V152 74","400 80 65-1 68l28 0dc8-18 14-25 26-21 29 11 16 27 27 28 51 0 35-7 58-22 11-9 6-23 29-13dl35 0 0 38 32 0dc4-4 30-3 34-5 8-7 6-16 9-27 2-7-14-14-8-20 5-6 24 16 37 18 44 4 43-12 62-18 14-2 20 19 34 22dl0 32-402 0czm-1-1dl402 0d0 32c-19-4-26-24-39-21-15 5-7 17-19 21-28 8-33-5-68-16-21-8-23 1-23 20l0 27-35 0-1-51c-43 5-57-8-76 8-18 17-23 39-30 39-41-6-36-24-54-27-24-1-35 18-39 18l-18 0czB262 19B261 51B135 41B57 41B25 61B121 60B295 32B333 37B363 21B87 61C168 15C146 18C168 21C187 18G185 35G227 71dpP203 62h203 43dh168 18h187 21dH215 54v241 63dV158 14dV201 32V173 25ds177s219","250 120 110-1 114l32-1c-7-29 6-31 2-59l37 0-8 59 55 0dc45-13 52-19 55-28 2-7-9-10-7-19dl18 0c-6 14 2 14-1 22 23-5 35 2 49 0d-13-39-1-49-3-57dl23-1 0 91-251 0czzzm-1-1l61 1dc-31 11-42 52-43 57d-1 28-10 24-12 42l-6 0czdm84 101dl0-52c25 3 42 14 66 8d-1 6 3 8 5 20d-42 3-37-12-52-3-9 6-4 9-11 27zzB17 107B143 87B102 97B220 79C18 70C10 86C95 103C155 41C108 76C195 20dpP71 57dP195 30h26 92dh81 65h71 75h81 84H17 82H71 96dH105 79dv23 97dv91 105v114 80dv33 68ds42s177","300 100 0-1 81c38 1 44-5 103 0l0-16c31 2 50-4 81-2dl0 33 16 0 0-27d30 0 0-8 10 0 0-8 11 0 0 16d26 0d26-2 0 34-301-1czm173-1l128 0 0 44dc-72-8-66 10-128 0dzC37 37C86 42C95 45C57 46C130 36C189 91C189 73C252 61G59 57G119 62G193 88pP19 77P24 74P27 64h39 34h54 32h94 32h60 50dh130 32dh122 48dh92 57h120 32dH83 39H59 61H82 57H66 32H82 32dH144 46H108 32dv34 53dv34 45dv34 37dv26 53dv26 45dv26 37v74 42dv99 35v99 40v196 86dV49 39V90 48V135 39V125 39V260 44ds108s176s224","150 50 0-1 30c21 1 32-5 43-2 24 6 30-3 61 3l48 0 0 21-152 0czpv103 30"],T=.4;class j{constructor(t){this.$t=t,this.ri=new O(this.$t,{$:this.$t.$}),this.ci=new O(this.$t,{}),this.ai=new O(this.$t,{Ys:!0,Zs:!0,Ct:!0}),this.li=[.2,.35,.5].map(t=>new O(this.$t,{Ys:!0,Zs:!0,ti:t}))}init(){for(const t of O.si)t.hi();this.ii(),this.di()}fi(){let t;for(const s of this.$t.Gt.ui)switch(s.type){case 0:t=s.points[0],this.W.beginPath(),this.W.moveTo(t.x,t.y);break;case 1:t=s.points[0],this.W.lineTo(t.x,t.y);break;case 2:const[i,h,e]=s.points;this.W.bezierCurveTo(i.x,i.y,h.x,h.y,e.x,e.y);break;case 3:this.W.closePath(),this.W.fill()}}Mi(){this.W.beginPath();for(const t of this.$t.Gt.wi)this.W.fillRect(t.x,t.y,t.w,t.mi)}pi(){const t=new e(1),s=this.$t.Dt.wt.filter(t=>t.Ms);for(const i of s){const s=i.vt.O(i.zt),h=i.vt.A(i.zt);this.W.save(),this.W.translate(i.vt.x,i.vt.y),this.W.rotate(s);let e=0;for(;e<h;)this.W.beginPath(),this.W.moveTo(-4,e),this.W.lineTo(-4,e+4),this.W.lineTo(9+7*t.L(),e+2),this.W.closePath(),this.W.fill(),e+=5;this.W.restore()}}vi(){const t=this.W,s=this.$t.Kt;t.save(),t.translate(s.rs.bt.x,s.rs.bt.y+10*(s.Dt.ns>0?1:-1)),3===s.Dt.ss?(t.rotate(s.rs.Nt.H()+Math.PI),t.scale(.9,1.2)):t.scale(1,s.Vs.Rs*(s.Dt.ns>0?1:-1)),"l"===s.Dt.Xt&&t.scale(-1,1),t.save(),t.translate(-3,-10),t.rotate(s.Vs.Gs),t.drawImage(M.X,0,0,5,10),t.restore(),t.save(),t.translate(1,-10),t.rotate(s.Vs.Ts),t.drawImage(M.X,0,0,5,10),t.restore(),t.drawImage(M.J,-20,-36,40,40),t.save(),t.translate(0,s.Vs.Hs),t.save(),t.translate(-3,-13),t.rotate(s.Vs.Os),t.scale(.8,.8),t.drawImage(M.X,0,0,5,10),t.restore(),t.save(),t.translate(3,-10),t.rotate(s.Vs.As),t.scale(.8,.8),t.drawImage(M.X,0,0,5,10),t.restore(),t.drawImage(M.I,-20,-33),t.translate(0,s.Vs.Ls),t.scale(1,s.Vs.js),t.drawImage(M.q,-3,-8),t.restore(),3===s.Dt.ss&&this.zi(new h(0,-14)),t.restore()}Ci(){const t=this.$t.ni.oi.$,s=this.W.createLinearGradient(0,0,0,t.height);s.addColorStop(0,"#555"),s.addColorStop(1,"#111"),this.W.fillStyle=s,this.W.fillRect(0,0,t.width,t.height);const i=this.W.createRadialGradient(150,100,10,150,100,300);i.addColorStop(0,"#ddd"),i.addColorStop(.03,"#ddd"),i.addColorStop(.04,"#777"),i.addColorStop(1,"transparent"),this.W.fillStyle=i,this.W.fillRect(0,0,t.width,t.height)}yi(t,s,i,h,n){const o=new e(n),r=this.$t.ni.oi.$,c=2/this.$t.ni.oi.ti,a=this.W.createLinearGradient(0,0,0,r.height);a.addColorStop(0,t),a.addColorStop(1,"#111"),this.W.filter=`blur(${c}px)`,this.W.fillStyle=a,this.W.lineWidth=0;let l=0;for(;l<r.width;)this.W.beginPath(),this.W.save(),this.W.translate(l,r.height),this.W.scale(1,i+o.R()*i*.5),this.W.arc(0,0,s,Math.PI,2*Math.PI),this.W.closePath(),this.W.fill(),this.W.restore(),l+=h+o.R()*h*.5}_i(t){const s=this.$t.bi.bt.x-100,i=this.$t.bi.bt.x+this.$t.$.width+100;for(let h=s;h<i;h+=this.$t.Bi.Vt){const s=Math.floor(h/this.$t.Bi.Vt);for(const i of this.$t.Bi.At[s]||[]){if(i.Rt!==t)continue;const s=i.Lt.frames.length;let h=Math.abs(Math.round(this.$t.It/40+i.bt.x)%(2*s)-s);h===s&&(h=s-1);const e=i.Lt.frames[h];this.W.drawImage(e,i.bt.x-e.width/2,i.bt.y-e.height+5)}}}gi(t,s,i){this.W.save(),this.W.translate(t.x,t.y-1),i+=5*Math.sin(this.$t.It/300);const h=this.W.createRadialGradient(0,0,10,0,0,i);h.addColorStop(0,s),h.addColorStop(1,"transparent"),this.W.fillStyle=h,this.W.fillRect(-i,-i,2*i,2*i),this.W.restore()}Pi(){this.W.strokeStyle="#fff",this.W.lineWidth=.5;for(const t of this.$t.Wt.Wt){const s=t.bt,i=t.Nt;this.W.beginPath(),this.W.moveTo(s.x,s.y),this.W.lineTo(s.x+i.x,s.y+i.y),this.W.stroke()}}ki(){const t=new e(1);this.W.lineWidth=.5,this.W.strokeStyle="#fff3";for(let s=0;s<50;s++){const s=.6+.8*t.L(),i=.2+.2*t.L(),h=(t.L()*this.oi.$.width+s*this.$t.It/5)%this.oi.$.width,e=(t.L()*this.oi.$.height+i*this.$t.It/5)%this.oi.$.height;this.W.beginPath(),this.W.moveTo(h,e),this.W.lineTo(h+4*s,e+4*i),this.W.stroke()}}xi(){for(const t of this.$t.Gt.Es)if(!t.bs)switch(t.type){case 0:this.Si(t,12,!1);break;case 1:this.Si(t,8,!0);break;case 2:this.zi(t.bt)}}zi(t){this.W.save(),this.W.translate(t.x,t.y+3*Math.sin(this.$t.It/400)),this.W.scale(1+.05*Math.sin(this.$t.It/230),1+.05*Math.sin(this.$t.It/280));const s=this.W.createRadialGradient(0,0,0,0,0,22);s.addColorStop(0,"#8883"),s.addColorStop(.65,"#8888"),s.addColorStop(.95,"#888a"),s.addColorStop(1,"#8880"),this.W.fillStyle=s,this.W.beginPath(),this.W.fillRect(-22,-22,44,44),this.W.closePath(),this.W.fillStyle="#888c",this.W.beginPath(),this.W.arc(8,-8,5,0,2*Math.PI),this.W.closePath(),this.W.fill(),this.W.restore()}Si(t,s,i){this.W.save(),this.W.translate(t.bt.x,t.bt.y+5*Math.sin(this.$t.It/800));for(let t=0;t<4;t++){const h=(this.$t.It+t*Math.PI*125)%(Math.PI/2*1e3),e=Math.cos(h/1e3),n=Math.sin(h/1e3);this.W.scale(1,-1),this.Vi(n,e,1,s,i),this.W.scale(1,-1),this.Vi(n,e,.6,s,i)}this.W.globalCompositeOperation="screen",this.gi(new h(0,0),i?"#001":"#200",25),this.W.globalCompositeOperation="source-over",this.W.restore()}Vi(t,s,i,h,e){const n=this.Hi(50+180*s*i),o=this.Hi(120*s*i);this.W.fillStyle=e?`#${o}${o}${n}`:`#${n}${o}${o}`,this.W.beginPath(),this.W.lineTo(8-16*t,0),this.W.lineTo(0,h),this.W.lineTo(16*s-8,0),this.W.closePath(),this.W.fill()}Hi(t){const s=Math.round(t).toString(16);return 1===s.length?"0"+s:s}Ai(){this.W.drawImage(M.K,80,170,80,160),this.W.save(),this.W.translate(130,175),this.W.rotate(Math.sin(this.$t.It/450)/25-.1),this.W.drawImage(M.U,-15,0,80,120),this.W.restore()}Oi(){this.W.lineWidth=5,this.W.strokeStyle="#000";let t=1090;for(;t<this.$t.Gt.Ot.x;)this.W.save(),this.W.translate(t,310),this.W.beginPath(),this.W.arc(0,0,25,Math.PI,2*Math.PI),this.W.closePath(),this.W.fill(),this.W.beginPath(),this.W.moveTo(0,0),this.W.lineTo(0,-80),this.W.stroke(),this.W.beginPath(),this.W.moveTo(-15,-65),this.W.lineTo(15,-65),this.W.stroke(),this.W.restore(),t+=80}Gi(){if(this.$t.Ti||this.$t.ji){const t=this.$t.It-Math.max(this.$t.Ti,this.$t.ji),s=Math.sqrt(this.W.canvas.width*this.W.canvas.width+this.W.canvas.height*this.W.canvas.height);let i=s*(t/1100);this.$t.ji&&(i=s-i),this.W.globalCompositeOperation="destination-in",this.W.beginPath(),this.W.arc(this.$t.Kt.rs.bt.x,this.$t.Kt.rs.bt.y,Math.max(0,i),0,2*Math.PI),this.W.closePath(),this.W.fill(),this.W.globalCompositeOperation="source-over"}}di(){this.ci.ei(),this.Ci(),this.ai.ei(),this.W.fillStyle="#000",this.pi(),this.Mi(),this.fi();const t=[["#282828",500,.5,1300,3],["#222",400,.7,1e3,7],["#1d1d1d",200,1,800,9]];for(const[s,i]of this.li.entries())i.ei(),this.yi(...t[s])}F(){const t=this.$t.bi.bt;this.ri.ei(),this.Li(this.ci);for(const t of this.li)this.Li(t);if(this.W.translate(-t.x,-t.y),this._i(!1),0===this.$t.Tt.Gt&&this.Ai(),this.$t.Tt.Gt===G.length-1&&this.Oi(),this.W.translate(t.x,t.y),this.ki(),this.Li(this.ai),this.W.translate(-t.x,-t.y),this.$t.Kt.cs||this.vi(),this.xi(),this.Pi(),this._i(!0),!this.$t.Kt.cs){this.W.globalCompositeOperation="screen";let t="#333";const s=this.$t.Kt.Dt.os,i=this.$t.It-s;s&&(t=i>2500?Math.sin(i/50)>0?"#005":t:"#005"),this.gi(this.$t.Kt.rs.bt,t,50),this.W.globalCompositeOperation="source-over"}this.Gi(),this.W.translate(t.x,t.y)}ii(){this.$t.$.width=window.outerWidth*T,this.$t.$.height=window.outerHeight*T;for(const t of O.si)t.ii();this.di()}Li(t){t.Zs?this.Ri(t):this.W.drawImage(t.$,0,0)}Ri(t){this.W.drawImage(t.$,this.$t.bi.bt.x*t.ti,this.$t.bi.bt.y*(1===t.ti?1:0),this.oi.$.width,this.oi.$.height,0,0,this.oi.$.width,this.oi.$.height)}}class L{constructor(t){this.$t=t,this.bt=new h}lt(){const t=this.$t.$.width,s=this.$t.$.height,i=this.$t.Kt.rs.bt,[h,e,n,o]=[this.$t.Gt.Ot.x-t,this.$t.Gt.Ot.y-s,i.x-t/2,this.Di(this.bt.y,i.y-s/1.7,-5,50)];this.bt.x=Math.min(Math.max(0,n),h),this.bt.y=Math.min(Math.max(0,o),e)}Di(t,s,i,h){const e=t-s;return e<i||e>h?V(t,s+(e<i?i:h),.12):t}}function*R(t,s){let i,e,n,o,r=null;for(let u=0;u<t.length-2;u+=4){i=t[u],e=t[u+1],n=t[u+2],o=t[u+3];for(let t=0;t<1;t+=s){const s=(a=e,l=n,d=o,f=t,new h(D((c=i).x,a.x,l.x,d.x,f),D(c.y,a.y,l.y,d.y,f)));r&&(yield[r,s]),r=s}}var c,a,l,d,f}function D(t,s,i,h,e){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*s+3*(1-e)*Math.pow(e,2)*i+Math.pow(e,3)*h}const F="mlczpdsCGB";class ${constructor(t,s){this.$t=t,this.d=s,this.Fi=0}$i(){this.next();const t=[],s=[],i=[],h=[];this.$t.Gt={Ot:this.Wi(),Ni:this.Ii(),ui:t,wi:s,qi:i,Es:h};let e="m",n=null,o=this.d[this.Fi-1],r=!1;for(;o;){if(F.includes(o)){if("d"===o){r=!r,o=this.next();continue}"z"===(e=o)&&(t.push({type:3,Ms:!1}),this.pt(this.bt,n,r)),o=this.next();continue}if(" "===o){o=this.next();continue}let c,a=[];switch(e){case"m":this.bt=this.Wi(),n=this.bt.v(),t.push({type:0,points:[n],Ms:r}),e="l";break;case"l":a=[this.bt.v(),this.bt.B(this.Wi()).v()],t.push({type:1,points:[a[1]],Ms:r}),this.pt(a[0],a[1],r,d|f);break;case"c":const l=this.bt.v();a=[this.bt.v().B(this.Wi()),this.bt.v().B(this.Wi()),this.bt.B(this.Wi()).v()],t.push({type:2,points:a,Ms:r});const u=R([l].concat(a),.1);for(const[t,s]of u)this.pt(t,s,r,d|f);break;case"p":this.Fi++,c=this.Wi();const M=new Map([["P",[15,5]],["h",[40,10]],["H",[80,10]],["v",[10,40]],["V",[10,80]]]),[w,m]=M.get(o);s.push({x:c.x-w,y:c.y-m,w:2*w,mi:2*m,Ms:r}),this.Ei(c,w,m,r);break;case"s":const p=this.Ii();i.push(p);break;case"C":c=this.Wi();const v=this.$t.Tt.gs[this.$t.Tt.Gt]||[];h.push({bt:c,type:0,bs:v.includes(h.length),Bt:20});break;case"G":c=this.Wi(),h.push({bt:c,type:1,bs:!1,Bt:25});break;case"B":c=this.Wi(),h.push({bt:c,type:2,bs:!1,Bt:25})}o=this.d[this.Fi-1]}}Ei(t,s,i,e){const[n,o,r,c]=[t.v().B(new h(-s,-i)),t.v().B(new h(s,-i)),t.v().B(new h(s,i)),t.v().B(new h(-s,i))],a=s>30?d:0;this.pt(n,o,e,a),this.pt(o,r,e,a),this.pt(r,c,e,a),this.pt(c,n,e,a)}Wi(){return new h(this.Ii(),this.Ii())}Ii(){let t=this.d[this.Fi-1],s=this.next();for(;s>="0"&&s<="9";)t+=s,s=this.next();return 10*parseFloat(t)}next(){return this.d[this.Fi++]}pt(t,s,i,h=0){i&&(h=0),this.$t.Dt.pt({vt:t,zt:s,Ft:l|h,Ms:i})}}class W{constructor(t,s){this.Ns=t,this.$=s,this.It=0,this.ft=new p,this.Dt=new B,this.Bi=new g,this.Wt=new P(this),this.vs=new A(this.Ns),this.ni=new j(this),this.bi=new L(this),this.Ti=0,this.ji=0,this.vs.init()}Js(t){this.Dt.Ct(),this.Tt=t,function(t,s){const i=G[s];new $(t,i).$i()}(this,t.Gt),t.bt||(t.bt=new h(150,this.Gt.Ni)),this.Ji(),this.ni.init(),this.Bi.Ht(this)}Ji(){const t=this.Tt,s=this.Dt.St(new h(t.bt.x,t.bt.y),new h(t.bt.x,this.Gt.Ot.y));t.bt.y=s.y-10,this.Kt=new H(this,new h(t.bt.x,t.bt.y))}Xi(){this.Tt.bt=this.Kt.rs.bt.v(),S(this.Tt)}lt(t){if(this.It+=t,this.Wt.lt(),this.ji)return;if(this.Kt.lt(),this.ft.lt(this.It),this.Ns.Ws)return;const s=this.Kt.rs.bt;for(const t of this.Gt.qi)t>this.Tt.bt.x&&s.x>t&&this.Xi();if(s.x>this.Gt.Ot.x+10){if(this.Tt.Gt===G.length-1)return this.Ns.Xs.finish(this.Tt),void(this.Ns.Ws=!0);this.ji=this.It,setTimeout(()=>{this.ji=0,this.Tt.Gt++,this.Tt.bt=null,S(this.Tt),this.Js(this.Tt),this.Ti=this.It,setTimeout(()=>{this.Ti=0},1100)},1100)}}}class N{constructor(t){this.Ki=document.getElementsByTagName("t")[0],this.Qi=document.getElementsByTagName("w")[0],this.Ui=document.getElementById("o"),this.Yi=document.getElementById("c"),this.Zi=document.getElementById("n"),this.th=document.getElementById("f"),this.sh=document.getElementById("p"),this.ih=document.getElementById("d"),this.hh=document.getElementById("r"),this.mode=0,this.Yi.addEventListener("click",()=>t.Us()),this.Zi.addEventListener("click",()=>t.Qs()),this.Ui.classList.remove("r"),this.Qi.classList.add("r")}eh(){this.Ki.classList.remove("r"),this.Ui.classList.add("r"),this.th.classList.add("r"),this.hh.classList.add("r")}show(){this.eh(),this.Ui.classList.remove("r")}hide(){this.Ki.classList.add("r")}finish(t){this.eh(),this.mode=1,this.th.classList.remove("r"),this.sh.innerText=Object.values(t.gs).reduce((t,s)=>t+s.length,0).toString(),this.ih.innerText=localStorage.getItem("tul_d")||"0"}Ks(){this.mode=2,this.th.classList.add("r"),this.hh.classList.remove("r")}}class I{constructor(t){this.Ws=!0,this.$t=new W(this,t),this.Xs=new N(this)}start(){this.$t.Js(x())}Us(){this.Ws=!this.Ws,this.Ws?this.Xs.show():this.Xs.hide()}Qs(){this.Xs.mode=0,localStorage.removeItem("tul_d"),localStorage.removeItem("tul_s"),this.start(),this.Ws=!1,this.Xs.hide()}}let q=0;i.d(s,"tick",function(){return K});let E=0;const J=1e3/60;let X;function K(t){const s=t-E,i=Math.floor(s/J);E+=i*J;for(let t=0;t<i;t++)X.$t.lt(J);X.$t.bi.lt(),X.$t.ni.F(),requestAnimationFrame(K),function(t){if(t-q>100){q=t;const s=170+40*Math.sin(t/631)+60*Math.cos(t/487)+30*Math.sin(t/227);zzfx(.015,2,s,1.5,.5,0,5,.1,0)}}(E)}!async function(){await w();const t=document.getElementsByTagName("canvas")[0];(X=new I(t)).start(),requestAnimationFrame(K),window.addEventListener("resize",()=>X.$t.ni.ii())}()}]);</script></body></html>