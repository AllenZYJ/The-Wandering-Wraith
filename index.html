<html><head><style>body{margin:0;background:#000}*{font-weight:300}canvas{width:100%;height:100%;cursor:none;image-rendering:crisp-edges}svg{display:none}tt{font-size:80px;margin-top:100px;margin-bottom:10px;background:-webkit-linear-gradient(#fff,#4376fd);-webkit-background-clip:text;-webkit-text-fill-color:transparent}ts{font-size:30px;color:grey;margin-bottom:150px}t{position:absolute;background-color:#000;width:100%;height:100%;color:#faebd7;display:flex;flex-direction:column;align-items:center;opacity:.7;text-align:center}l{display:block;line-height:80px;font-size:30px}h1{font-size:50px}button{display:block;margin-bottom:30px;padding:15px 50px;background:#000;border:none;color:#fff;font-size:40px;transition:.3s ease-in-out;cursor:pointer}button:hover{font-size:45px}.r{display:none!important}</style></head><body><t><tt class=t>The Wandering Wraith</tt><ts class=t>...or the grand venture of going back to grave.</ts><div id=o><button id=c>Continue</button> <button id=n>New game</button></div><div id=f class=r><h1>THE END</h1><l>The wraith found his peace back in the grave.</l><l>Collected <span id=p></span>/10 crystals</l><l>Died <span id=d></span> times</l></div><div id=r class=r><h1>A js13k challenge by</h1><h2>Mateusz Tomczyk</h2><h3>Thanks to Frank Force for ZzFX</h3></div></t><canvas></canvas><svg xmlns="http://www.w3.org/2000/svg" id="head" width="40" height="40" version="1.1" viewBox="0 0 10.6 10.6"><path fill="#e6e6e6" d="M.938 287.49l1.528.481c1.735-1.247 3.446-2.322 4.808-.142.89 1.262.842 2.886.538 4.074l-1.782 1.216c-4.897-.962-4.069-3.56-5.092-5.629z" transform="translate(.113 -279.07) scale(.97464)"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="eyes" width="10" height="10" version="1.1" viewBox="0 0 2.6 2.6"><g transform="translate(-9.4 -506.59) scale(1.7512)"><ellipse cx="-42.9" cy="286.9" opacity=".5" rx=".3" ry=".5" transform="rotate(-9.621)"/><ellipse cx="65.9" cy="282.5" opacity=".5" rx=".3" ry=".5" transform="rotate(11.84)"/></g></svg> <svg xmlns="http://www.w3.org/2000/svg" id="torso" width="40" height="40" version="1.1" viewBox="0 0 10.6 10.6"><path fill="#ccc" d="M4.453 291.64c-.092.702.024 2.137-.37 2.765l3.01.055c-.395-.486-.529-1.83-.363-2.774z" transform="translate(0 -286.42)"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="limb" width="5" height="15" version="1.1" viewBox="0 0 1.3 4"><path fill="#e6e6e6" d="M.026 293.03l1.295.036-.398 3.533c-.142.225-.234.737-.542-.015z" transform="translate(0 -293.03)"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="scaffold" width="80" height="140" version="1.1" viewBox="0 0 21.2 37"><path fill="#1a1a1a" stroke-width=".1" d="M9.95.568l.815.9-8.88 9.407-.816-.9zM1.88.532H15.22v1.042H1.88zm-1.447 0h1.448v35.723H.433z"/></svg> <svg xmlns="http://www.w3.org/2000/svg" id="hangman" width="80" height="110" version="1.1" viewBox="0 0 21.2 29.1"><path fill="#1a1a1a" d="M3.408 4.41c.927.42 1.429 1.138 1.12 1.817-.307.68-.938.803-1.865.383S1.038 5.342 1.346 4.662c.308-.68 1.135-.672 2.062-.252zm2.934 3.028l.634 1.397-.215 5.571-.386 1.286-.322-1.297-.158-5.514-.1 4.066-.594 9.005-.133 2.303-.708-2.303-.824-7.765-.265 7.835-.355 2.17-.531-2.214-.842-8.013.133-5.271-.664 5.404-.488 1.462-.25-1.543.423-5.665.89-1.335L4.2 5.983zM3.89-.034h.31v5.157l-.31-.24z"/></svg><script>!function(t){var s={};function i(h){if(s[h])return s[h].t;var e=s[h]={s:h,i:!1,t:{}};return t[h].call(e.t,e,e.t,i),e.i=!0,e.t}i.h=t,i.c=s,i.d=function(t,s,h){i.o(t,s)||Object.defineProperty(t,s,{l:!0,get:h})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i.M=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.u)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{l:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(h,e,function(s){return t[s]}.bind(null,e));return h},i.n=function(t){var s=t&&t.u?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.m=1)}([function(t,s){zzfx_v=.5,zzfx_x=new AudioContext,zzfx=(t,s,i,h=1,e=.1,n=0,o=0,r=0,c=0)=>{let a=44100,l=Math.PI;i*=2*l/a,i*=1+s*(2*Math.random()-1),n*=1e3*l/a**2,e*=0|(h=0<h?a*(10<h?10:h)|0:1),r*=2*l/a,c*=l,s=[];for(var f=0,d=0,u=0;u<h;++u)s[u]=t*zzfx_v*Math.cos(f*i*Math.cos(d*r+c))*(u<e?u/e:1-(u-e)/(h-e)),f+=1+o*(2*Math.random()-1),d+=1+o*(2*Math.random()-1),i+=n;return t=zzfx_x.createBuffer(1,h,a),i=zzfx_x.createBufferSource(),t.getChannelData(0).set(s),i.buffer=t,i.connect(zzfx_x.destination),i.start(),i}},function(t,s,i){"use strict";i.r(s);class h{constructor(t=0,s=0){this.x=t,this.y=s}v(){return new h(this.x,this.y)}_(){return this.x=0,this.y=0,this}C(t){const s=this.x*Math.cos(t)-this.y*Math.sin(t),i=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=s,this.y=i,this}g(t){return this.x+=t.x,this.y+=t.y,this}k(t){return this.x-=t.x,this.y-=t.y,this}P(){const t=Math.sqrt(this.x*this.x+this.y*this.y);return t?(this.x/=t,this.y/=t,this):this._()}S(t){return this.x*=t,this.y*=t,this}B(t){return this.x*t.x+this.y*t.y}V(){return Math.sqrt(this.x*this.x+this.y*this.y)}A(){return Math.PI-Math.atan2(-this.x,-this.y)}O(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}j(t){return Math.PI-Math.atan2(this.x-t.x,this.y-t.y)}H(t){return Math.acos(this.B(t)/(this.V()*t.V()))||0}}class e{constructor(t){this.T=t%2147483647,this.T<=0&&(this.T+=2147483646)}G(){return this.T=16807*this.T%2147483647}L(){return(this.G()-1)/2147483646}R(){return this.L()-.5}}function n(t,s,i,n,o,r,c){const a=new e(r);var l=t.createLinearGradient(0,0,0,s);l.addColorStop(.5,"#151515"),l.addColorStop(1,"#000"),t.strokeStyle=l,function t(s,i,e,n,o,r,c,a,l){const f=Math.PI/2;const d=f-r;r+=(1+1.2*d*(Math.sin(a)+2))/n*l;const u=new h(0,-1).C(r).S(c);const M=e.v().g(u);i.beginPath();i.lineWidth=Math.pow(n,.9);i.moveTo(e.x,e.y);i.lineTo(M.x,M.y);i.stroke();i.closePath();n>=1&&(t(s,i,M,n-1,o*(1+(s.L()-.5)/3),r+o,c*Math.min(s.L()+.4,.8),a,l),t(s,i,M,n-1,o*(1+(s.L()-.5)/3),r-o,c*Math.min(s.L()+.4,.8),a,l))}(a,t,new h(s/2,s),i,n,0,o,c,1/Math.pow(i,1.5))}async function o(t,s,i,h,e){const o=s*h/1.5;return t.D(o,o),c(t,30,(t,r)=>n(t,o,s,i,h,e,r))}function r(t,s,i){return t.D(50,50),c(t,15,(t,n)=>(function(t,s,i,n){const o=new e(i);var r=t.createLinearGradient(0,0,0,50);r.addColorStop(0,"#111"),r.addColorStop(1,"#000"),t.strokeStyle=r,t.lineWidth=.2;for(let i=0;i<10;i++){let i=new h(o.G()%10+20,50);t.beginPath(),t.moveTo(i.x,i.y);let e=(o.L()+.5)/10,r=0;const c=(o.L()+1)*s;for(let s=0;s<10;s++){const s=new h(0,-1).C(r).S(c);i=i.v().g(s),t.lineTo(i.x,i.y),r+=e+Math.sin(n)/30}t.stroke(),t.closePath()}})(t,s,i,n))}async function c(t,s,i){const h=[],e=Math.PI/s;let n=Math.PI/2;for(let o=0;o<s;o++)n=n+=e,h.push(await t.F(t=>i(t,n)));return h}class a{constructor(){this.$=document.createElement("canvas"),this.W=this.$.getContext("2d")}D(t,s){this.$.width=t,this.$.height=s}async F(t){return new Promise((s,i)=>{t(this.W);const h=new Image;h.onload=()=>s(h),h.src=this.$.toDataURL(),this.N()})}N(){this.W.clearRect(0,0,this.$.width,this.$.height)}}const l=1,f=2,d=4;function u(t){return new Promise((s,i)=>{const h=document.getElementById(t),e=(new XMLSerializer).serializeToString(h),n="data:image/svg+xml;base64,"+btoa(e),o=new Image;o.onload=()=>s(o),o.src=n})}const M={};async function w(){M.I=await u("head"),M.q=await u("eyes"),M.J=await u("torso"),M.X=await u("limb"),M.K=await u("scaffold"),M.U=await u("hangman"),M.Y=await async function(){const t=new e(1),s=new a,i=[];for(let h=4;h<11;h++)i.push({frames:await o(s,h,t.L()/4+.3,5*h,h),Z:25*Math.pow(h,1.3),mask:d});for(let t=0;t<4;t++)i.push({frames:await r(s,1+.5*t,t),Z:5+t,mask:f});return i}(),M.tt={st:[.6,1,200,.1,.47,4.2,1.4,1,.15],it:[.6,1,150,.15,.47,4.2,1.4,1,.25],ht:[.4,.6,50,.02,.54,4,.9,10.7,.37],et:[.8,.7,450,.5,.21,11.3,.8,7,.56],nt:[1,.1,304,.2,.01,0,.3,0,.5],collect:[.8,0,10,.2,.88,1,.3,10,.41],ot:[1,.1,428,.2,.31,0,.2,5.1,.42]}}class p{constructor(t,s,i){this.rt=t,this.ct=s,this.at=i}lt(t){this.ft||(this.ft=t);const s=t-this.ft,i=(this.ct-this.rt)/this.at,h=this.rt+s*i;return h>this.ct?null:Math.sin(h)}}class m{constructor(){this.dt=new Map}ut(t,s){this.dt.set(t,s)}lt(t){for(const[s,i]of this.dt.entries()){const h=s.lt(t);null!==h?i(h):this.dt.delete(s)}}}const z=100;function v(t,s){return 1e4*t+s}function y(t,s,i){const h=t.O(i),e=s.O(i),n=t.O(s);return h+e>=n-.1&&h+e<=n+.1}function _(t,s,i,e){const n=((e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x))/((e.y-i.y)*(s.x-t.x)-(e.x-i.x)*(s.y-t.y)),o=((s.x-t.x)*(t.y-i.y)-(s.y-t.y)*(t.x-i.x))/((e.y-i.y)*(s.x-t.x)-(e.x-i.x)*(s.y-t.y));return n>=0&&n<=1&&o>=0&&o<=1?new h(t.x+n*(s.x-t.x),t.y+n*(s.y-t.y)):null}function*b(t,s){const i=Math.floor(Math.min(t.x,s.x)/z),h=Math.floor(Math.max(t.x,s.x-1)/z),e=Math.floor(Math.min(t.y,s.y)/z),n=Math.floor(Math.max(t.y,s.y-1)/z);for(let t=i;t<=h;t++)for(let s=e;s<=n;s++)yield v(t,s)}function C(t,s,i,e,n){const o=i.O(e),r=((t.x-i.x)*(e.x-i.x)+(t.y-i.y)*(e.y-i.y))/Math.pow(o,2),c=new h(i.x+r*(e.x-i.x),i.y+r*(e.y-i.y));if(!y(i,e,c))return null;const a=s-t.O(c);if(a<0)return null;const l=t.j(c),f=new h(0,1).S(a).C(l);return Math.abs(f.v().P().H(n.v().P()))>Math.PI/2&&(f.S(-1),f.P().S(a-2*s)),[f,c]}class g{constructor(){this.Mt=new Map,this.wt=[]}pt(t){this.wt.push(t);for(const s of b(t.zt,t.vt))this.Mt.has(s)?this.Mt.get(s).push(t):this.Mt.set(s,[t]);return t}yt(){this.wt=[],this.Mt.clear()}*_t(t){t.bt=[];const s=new Set;for(const i of function*(t,s){const i=Math.floor((t.x-s)/z),h=Math.floor((t.x+s-1)/z),e=Math.floor((t.y-s)/z),n=Math.floor((t.y+s-1)/z);for(let t=i;t<=h;t++)for(let s=e;s<=n;s++)yield v(t,s)}(t.Ct,t.gt))for(const h of this.Mt.get(i)||[])if(!s.has(h)){s.add(h);const i=C(t.Ct,t.gt,h.zt,h.vt,t.kt);i&&(yield{xt:h,Pt:t,St:i[0],Bt:i[1]})}}Vt(t,s){const i=b(t,s);for(const h of i)if(this.Mt.has(h))for(const i of this.Mt.get(h)){const h=_(t,s,i.zt,i.vt);if(h)return h}return null}}class k{constructor(){this.At=100}async Ot(t){this.jt=[];for(let s=0;s<=2*t.Tt.Ht.x;s+=this.At)this.jt.push([]);const s=new e(t.Gt.Tt+2);for(const i of M.Y){let e=s.L()*i.Z;for(;e<t.Tt.Ht.x;){e+=i.Z+i.Z*(s.L()-.5);const n=this.jt[Math.floor(e/this.At)],o=this.Lt(t,e,i.mask);for(const t of o)if(t){const e=s.L()>.8;n.push({Ct:t.g(new h(0,(e?5:0)+5*s.L())),Rt:i,Dt:e})}}}}*Lt(t,s,i){const e=b(new h(s,-1e3),new h(s,t.Tt.Ht.y)),n=new Set,o=t.Ft.Mt,r=new Set;for(const t of e)if(o.has(t))for(const s of o.get(t))r.has(s)||(r.add(s),n.add([s.zt,s.vt,!!(s.$t&i)]));let c=[];for(const[t,i,e]of n){const n=i.v().k(t),o=n.y/n.x,r=t.y-o*t.x,a=new h(s,o*s+r);c.push([t,i,a,o,e])}c.sort((t,s)=>t[1].y-s[1].y);let a=!0;for(const[t,s,i,h,e]of c)y(t,s,i)&&(e&&i.y>0&&Math.abs(h)<1.5&&a&&(yield i),a=!a)}}class x{constructor(t){this.Wt=t,this.Nt=[]}lt(){for(const t of this.Nt)if(t.Ct.g(t.kt),t.kt.y+=.03,this.Wt.It>t.qt+t.Et){const s=this.Nt.indexOf(t);this.Nt.splice(s,1)}}Jt(t){for(let s=0;s<t.count;s++){const s=t.Xt.v().C((Math.random()-.5)*Math.PI*2).S(.3*(Math.random()+.5)),i={qt:this.Wt.It,Ct:t.Ct.v(),kt:s,Et:t.Et*(Math.random()+.5)*5};this.Nt.push(i)}}}i(0);class P{constructor(t,s){this.Ft=t,this.Kt=s,this.Xt="r",this.Qt=3.5,this.Ut=4,this.Yt=0,this.Zt=0,this.ts=!1,this.ss=0,this.hs=0,this.es=0,this.ns=.25,this.os=0}get rs(){return this.Kt.rs}lt(){if(this.Kt.cs)return;const t=this.rs;if(this.as(),this.os&&this.Kt.Wt.It-this.os>3500&&(this.ns=.25,this.rs.Ct.y+=20,this.os=0),t.ls=t.Ct.v(),0===this.ss){t.Ct.x+=t.kt.x;const s=this.Ft.Vt(new h(t.Ct.x,t.Ct.y-20*(this.ns>0?1:-1)),new h(t.Ct.x,t.Ct.y+20*(this.ns>0?1:-1)));s&&(t.Ct.y=s.y-t.gt*(this.ns>0?1:-1)),this.Kt.fs&&(this.rs.kt.x>0?"r":"l")===this.Xt||(t.kt.x*=.5),t.kt.y=0}1===this.ss&&(t.kt.y+=this.ns,t.kt.x*=.94,t.Ct.g(t.kt)),2===this.ss&&t.kt._(),3===this.ss&&(t.Ct.g(t.kt),zzfx(.06,.1,200*Math.sin(t.kt.y/5)+100,.15,.51,5,2,0,.09),this.Kt.Wt.Nt.Jt({count:3,Xt:new h(3,0),Et:120,Ct:t.Ct}));const s=t.gt,i=Math.min(t.kt.V(),s);if(t.kt=t.kt.P().S(i),2!==this.ss){const s=Array.from(this.Ft._t(t));s.length&&(1===this.ss&&this.Kt.Wt.It-this.Zt>150&&(zzfx(...M.tt.nt),this.Kt.ds=Math.min(1,1/Math.abs(t.kt.y)/8+.7),this.ss=0),3===this.ss&&this.us());for(const i of s){t.bt.push(i.Bt),i.xt.Ms&&this.Kt.ws();const s=i.Bt.y-t.Ct.y;if((this.ns>0?s<=this.Ut:s>=-this.Ut)&&t.Ct.k(i.St),1===this.ss){const s=t.Ct.v().k(t.ls),i=t.kt;t.kt.x=Math.abs(i.x)<Math.abs(s.x)?i.x:s.x,t.kt.y=Math.abs(i.y)<Math.abs(s.y)?i.y:s.y}}}t.Ct.x=Math.max(0,t.Ct.x)}as(){if(this.ps=null,3===this.ss){if(!(this.Kt.Wt.It-this.hs>2e3))return;this.us()}for(const t of this.rs.bt){const s=(t.y-this.rs.Ct.y)*(this.ns>0?1:-1),i=t.x-this.rs.Ct.x;if(s>this.Ut)return void(this.ss=0);Math.abs(s)<=this.Ut&&(this.ps=i)}if(this.ps){const t=this.Kt.Wt.zs.ms;if(this.ps<0&&t.get("ArrowLeft")||this.ps>0&&t.get("ArrowRight"))return 2!==this.ss&&(this.Yt=this.Kt.Wt.It),void(this.ss=2)}1!==this.ss&&(this.Zt=this.Kt.Wt.It,this.ss=1)}vs(t){if(3===this.ss)return void this.rs.kt.C(t/11);this.Kt.fs=0===this.ss;let s=.3;0===this.ss&&(s=.2);const i=t*s;Math.abs(this.rs.kt.x+i)<this.Qt&&(this.rs.kt.x+=i),this.Xt=t<0?"l":"r",this.Kt.ys()}it(){if((0===this.ss||2===this.ss||1===this.ss&&this.Kt.Wt.It-this.Zt<150)&&this.Kt.Wt.It-this.Yt>151)return this.rs.kt.y=5,2===this.ss&&(this.rs.kt.x=-this.ps/3,this.rs.kt.y=5),this.rs.kt.y*=this.ns>0?-1:1,this.rs.bt=[],this.Yt=this.Kt.Wt.It,this.ts=!1,void zzfx(...M.tt.it);1===this.ss&&!this.ts&&this.Kt.Wt.It-this.Yt>300&&(this.rs.kt.y=5*(this.ns>0?-1:1),this.ts=!0,zzfx(...M.tt.st)),3===this.ss&&this.Kt.Wt.It-this.Yt>150&&this.us()}_s(t){3===this.ss?this.us():(this.rs.kt=new h(0,-6),this.rs.Ct.x=t.Ct.x,this.rs.Ct.y=t.Ct.y),this.ss=3,this.bs=t,this.hs=this.Kt.Wt.It,this.Yt=this.Kt.Wt.It}us(){this.ss=1,this.ts=!1,this.Yt=this.Kt.Wt.It,this.Kt.Wt.Nt.Jt({count:250,Xt:new h(8,0),Et:80,Ct:this.rs.Ct});const t=this.bs;this.bs=null,zzfx(...M.tt.ot),setTimeout(()=>t.Cs=!1,1e3)}gs(){this.ns=-.25,this.ts=!1,this.os=this.Kt.Wt.It}}function S(){return JSON.parse(localStorage.getItem("tul_s"))||{Tt:0,Ct:null,ks:{}}}function B(t){localStorage.setItem("tul_s",JSON.stringify(t))}function V(t,s,i){return(1-i)*t+i*s}class A{constructor(t,s){this.Wt=t,this.xs=90,this.Ps=0,this.Ss=0,this.Bs=new h(1,1),this.cs=!0,this.Vs={As:0,Os:-1,js:1,Hs:0,Ts:0,Gs:1,Ls:-15,Rs:1},this.fs=!1,this.ds=1,this.Ds(s),this.Ft=new P(t.Ft,this)}Fs(){this.Wt.dt.ut(new p(Math.PI/2,2.5*Math.PI,200),t=>this.Vs.Gs=(t+1)/2)}$s(){const t=this.Wt.zs;t.ms.get("Space")&&this.Ft.it(),2!==this.Ft.ss&&(t.ms.get("ArrowLeft")&&this.Ft.vs(-1),t.ms.get("ArrowRight")&&this.Ft.vs(1))}Ws(){this.Vs.Hs=0,this.Vs.Ts=0,this.Vs.Os=-1,this.Vs.js=1,Math.abs(this.Vs.Rs-this.ds)<.05&&(this.ds=1),this.Vs.Rs=V(this.Vs.Rs,this.ds,.3),this.fs&&(this.Vs.Hs=Math.sin(this.Wt.It/30)/2,this.Vs.Ts=Math.cos(this.Wt.It/30)/2),2===this.Ft.ss&&(this.Vs.Hs=-.6,this.Vs.Ts=-.7,this.Vs.Os=-1.3,this.Vs.js=-.7),this.Wt.It-this.Ss>100&&(this.Ss=this.Wt.It,this.rs.kt.y>1?this.Vs.Ls=-11:this.rs.kt.y<-1?this.Vs.Ls=-21:this.Vs.Ls=-15),1===this.Ft.ss&&(this.ds=1+Math.abs(this.rs.kt.y/17),this.rs.kt.y>.3?(this.Vs.Os=Math.sin(this.Wt.It/50)/3-1.5,this.Vs.js=1.5+Math.cos(this.Wt.It/50)/3,this.Vs.Hs=.3,this.Vs.Ts=-.3):(this.Vs.Os=Math.sin(this.Wt.It/200)/10-.7,this.Vs.js=.7-Math.sin(this.Wt.It/200)/10)),this.Vs.As=Math.sin(this.Wt.It/200)-2,Math.random()>.99&&this.Fs()}ys(){this.Wt.It-this.Ps>this.xs&&(this.Ps=this.Wt.It,this.rs.bt.length>0&&zzfx(...M.tt.ht))}lt(){this.fs=!1,this.$s(),this.Ft.lt(),this.Ns(),this.Ws()}Ns(){const t=this.Wt.Tt.Is;for(const[s,i]of t.entries())if(!i.Cs&&i.Ct.O(this.rs.Ct)<i.gt)switch(i.Cs=!0,i.type){case 0:const t=this.Wt.Gt;t.ks[t.Tt]||(t.ks[t.Tt]=[]),t.ks[t.Tt].push(s),zzfx(...M.tt.collect);break;case 1:this.Ft.gs(),setTimeout(()=>i.Cs=!1,5e3),zzfx(...M.tt.collect);break;case 2:this.Ft._s(i)}}ws(){this.cs=!0,localStorage.setItem("tul_d",((parseInt(localStorage.getItem("tul_d"))||0)+1).toString()),this.Wt.Nt.Jt({count:250,Xt:new h(5,0),Et:150,Ct:this.rs.Ct}),zzfx(...M.tt.et),setTimeout(()=>{this.Wt.qs(S())},1e3)}Ds(t){this.cs=!1,this.rs={gt:10,Ct:t,ls:t.v(),kt:new h,bt:[]}}}class O{constructor(t){this.Es=t,this.ms=new Map}init(){window.addEventListener("keydown",t=>{this.ms.set(t.code,!0),"Escape"===t.key&&(1===this.Es.Js.mode?this.Es.Js.Xs():2===this.Es.Js.mode?this.Es.Ks():this.Es.Qs())}),window.addEventListener("keyup",t=>{this.ms.set(t.code,!1)})}}class j{constructor(t,s={}){this.Wt=t,this.Us=!1,this.yt=!1,this.Ys=!1,this.Zs=1,j.ti.push(this),Object.assign(this,s),this.$||(this.$=document.createElement("canvas")),this.W=this.$.getContext("2d")}si(){this.Us?(this.$.width=this.Wt.Tt.Ht.x,this.$.height=1===this.Zs?this.Wt.Tt.Ht.y:this.Wt.$.height):(this.$.width=this.Wt.$.width,this.$.height=this.Wt.$.height),this.ii()}ii(){this.W.clearRect(0,0,this.$.width,this.$.height)}hi(){const t=this.Wt.ei;t.ni=this,t.W=this.W,this.yt&&this.ii()}}j.ti=[];const H=.4;class T{constructor(t){this.Wt=t,this.oi=new j(this.Wt,{$:this.Wt.$}),this.ri=new j(this.Wt,{}),this.ci=new j(this.Wt,{Us:!0,Ys:!0,yt:!0}),this.ai=[.2,.35,.5].map(t=>new j(this.Wt,{Us:!0,Ys:!0,Zs:t}))}init(){for(const t of j.ti)t.ii();this.si(),this.li()}fi(){let t;for(const s of this.Wt.Tt.di)switch(s.type){case 0:t=s.points[0],this.W.beginPath(),this.W.moveTo(t.x,t.y);break;case 1:t=s.points[0],this.W.lineTo(t.x,t.y);break;case 2:const[i,h,e]=s.points;this.W.bezierCurveTo(i.x,i.y,h.x,h.y,e.x,e.y);break;case 3:this.W.closePath(),this.W.fill()}}ui(){this.W.beginPath();for(const t of this.Wt.Tt.Mi)this.W.fillRect(t.x,t.y,t.w,t.wi)}pi(){const t=new e(1),s=this.Wt.Ft.wt.filter(t=>t.Ms);for(const i of s){const s=i.zt.j(i.vt),h=i.zt.O(i.vt);this.W.save(),this.W.translate(i.zt.x,i.zt.y),this.W.rotate(s);let e=0;for(;e<h;)this.W.beginPath(),this.W.moveTo(-2,e),this.W.lineTo(-2,e+4),this.W.lineTo(9+7*t.L(),e+2),this.W.closePath(),this.W.fill(),e+=5;this.W.restore()}}mi(){const t=this.W,s=this.Wt.Kt;t.save(),t.translate(s.rs.Ct.x,s.rs.Ct.y+10*(s.Ft.ns>0?1:-1)),3===s.Ft.ss?(t.rotate(s.rs.kt.A()+Math.PI),t.scale(.9,1.2)):t.scale(1,s.Vs.Rs*(s.Ft.ns>0?1:-1)),"l"===s.Ft.Xt&&t.scale(-1,1),t.save(),t.translate(-3,-10),t.rotate(s.Vs.Hs),t.drawImage(M.X,0,0,5,10),t.restore(),t.save(),t.translate(1,-10),t.rotate(s.Vs.Ts),t.drawImage(M.X,0,0,5,10),t.restore(),t.drawImage(M.J,-20,-36,40,40),t.save(),t.translate(0,s.Vs.As),t.save(),t.translate(-3,-13),t.rotate(s.Vs.js),t.scale(.8,.8),t.drawImage(M.X,0,0,5,10),t.restore(),t.save(),t.translate(3,-10),t.rotate(s.Vs.Os),t.scale(.8,.8),t.drawImage(M.X,0,0,5,10),t.restore(),t.drawImage(M.I,-20,-33),t.translate(0,s.Vs.Ls),t.scale(1,s.Vs.Gs),t.drawImage(M.q,-3,-8),t.restore(),3===s.Ft.ss&&this.zi(new h(0,-14)),t.restore()}vi(){const t=this.Wt.ei.ni.$,s=this.W.createLinearGradient(0,0,0,t.height);s.addColorStop(0,"#555"),s.addColorStop(1,"#111"),this.W.fillStyle=s,this.W.fillRect(0,0,t.width,t.height);const i=this.W.createRadialGradient(150,100,10,150,100,300);i.addColorStop(0,"#ddd"),i.addColorStop(.03,"#ddd"),i.addColorStop(.04,"#777"),i.addColorStop(1,"transparent"),this.W.fillStyle=i,this.W.fillRect(0,0,t.width,t.height)}yi(t,s,i,h,n){const o=new e(n),r=this.Wt.ei.ni.$,c=2/this.Wt.ei.ni.Zs,a=this.W.createLinearGradient(0,0,0,r.height);a.addColorStop(0,t),a.addColorStop(1,"#111"),this.W.filter=`blur(${c}px)`,this.W.fillStyle=a,this.W.lineWidth=0;let l=0;for(;l<r.width;)this.W.beginPath(),this.W.save(),this.W.translate(l,r.height),this.W.scale(1,i+o.R()*i*.5),this.W.arc(0,0,s,Math.PI,2*Math.PI),this.W.closePath(),this.W.fill(),this.W.restore(),l+=h+o.R()*h*.5}_i(t){const s=this.Wt.bi.Ct.x-100,i=this.Wt.bi.Ct.x+this.Wt.$.width+100;for(let h=s;h<i;h+=this.Wt.Ci.At){const s=Math.floor(h/this.Wt.Ci.At);for(const i of this.Wt.Ci.jt[s]||[]){if(i.Dt!==t)continue;const s=i.Rt.frames.length;let h=Math.abs(Math.round(this.Wt.It/40+i.Ct.x)%(2*s)-s);h===s&&(h=s-1);const e=i.Rt.frames[h];this.W.drawImage(e,i.Ct.x-e.width/2,i.Ct.y-e.height+5)}}}gi(t,s,i){this.W.save(),this.W.translate(t.x,t.y-1),i+=5*Math.sin(this.Wt.It/300);const h=this.W.createRadialGradient(0,0,10,0,0,i);h.addColorStop(0,s),h.addColorStop(1,"transparent"),this.W.fillStyle=h,this.W.fillRect(-i,-i,2*i,2*i),this.W.restore()}ki(){this.W.strokeStyle="#fff",this.W.lineWidth=.5;for(const t of this.Wt.Nt.Nt){const s=t.Ct,i=t.kt;this.W.beginPath(),this.W.moveTo(s.x,s.y),this.W.lineTo(s.x+i.x,s.y+i.y),this.W.stroke()}}xi(){const t=new e(1);this.W.lineWidth=.5,this.W.strokeStyle="#fff3";for(let s=0;s<50;s++){const s=.6+.8*t.L(),i=.2+.2*t.L(),h=(t.L()*this.ni.$.width+s*this.Wt.It/5)%this.ni.$.width,e=(t.L()*this.ni.$.height+i*this.Wt.It/5)%this.ni.$.height;this.W.beginPath(),this.W.moveTo(h,e),this.W.lineTo(h+4*s,e+4*i),this.W.stroke()}}Pi(){for(const t of this.Wt.Tt.Is)if(!t.Cs)switch(t.type){case 0:this.Si(t,12,!1);break;case 1:this.Si(t,8,!0);break;case 2:this.zi(t.Ct)}}zi(t){this.W.save(),this.W.translate(t.x,t.y+3*Math.sin(this.Wt.It/400)),this.W.scale(1+.05*Math.sin(this.Wt.It/230),1+.05*Math.sin(this.Wt.It/280));const s=this.W.createRadialGradient(0,0,0,0,0,22);s.addColorStop(0,"#8883"),s.addColorStop(.65,"#8888"),s.addColorStop(.95,"#888a"),s.addColorStop(1,"#8880"),this.W.fillStyle=s,this.W.beginPath(),this.W.fillRect(-22,-22,44,44),this.W.closePath(),this.W.fillStyle="#888c",this.W.beginPath(),this.W.arc(8,-8,5,0,2*Math.PI),this.W.closePath(),this.W.fill(),this.W.restore()}Si(t,s,i){this.W.save(),this.W.translate(t.Ct.x,t.Ct.y+5*Math.sin(this.Wt.It/800));for(let t=0;t<4;t++){const h=(this.Wt.It+t*Math.PI*125)%(Math.PI/2*1e3),e=Math.cos(h/1e3),n=Math.sin(h/1e3);this.W.scale(1,-1),this.Bi(n,e,1,s,i),this.W.scale(1,-1),this.Bi(n,e,.6,s,i)}this.W.globalCompositeOperation="screen",this.gi(new h(0,0),i?"#001":"#200",25),this.W.globalCompositeOperation="source-over",this.W.restore()}Bi(t,s,i,h,e){const n=this.Vi(50+180*s*i),o=this.Vi(120*s*i);this.W.fillStyle=e?`#${o}${o}${n}`:`#${n}${o}${o}`,this.W.beginPath(),this.W.lineTo(8-16*t,0),this.W.lineTo(0,h),this.W.lineTo(16*s-8,0),this.W.closePath(),this.W.fill()}Vi(t){const s=Math.round(t).toString(16);return 1===s.length?"0"+s:s}li(){this.ri.hi(),this.vi(),this.ci.hi(),this.W.fillStyle="#000",this.pi(),this.ui(),this.fi();const t=[["#282828",500,.5,1300,3],["#222",400,.7,1e3,7],["#1d1d1d",200,1,800,9]];for(const[s,i]of this.ai.entries())i.hi(),this.yi(...t[s])}Ai(){this.W.drawImage(M.K,80,170,80,160),this.W.save(),this.W.translate(130,175),this.W.rotate(Math.sin(this.Wt.It/450)/25-.1),this.W.drawImage(M.U,-15,0,80,120),this.W.restore()}F(){const t=this.Wt.bi.Ct;this.oi.hi(),this.Oi(this.ri);for(const t of this.ai)this.Oi(t);if(this.W.translate(-t.x,-t.y),this._i(!1),0===this.Wt.Gt.Tt&&this.Ai(),this.W.translate(t.x,t.y),this.xi(),this.Oi(this.ci),this.W.translate(-t.x,-t.y),this.Wt.Kt.cs||this.mi(),this.Pi(),this.ki(),this._i(!0),!this.Wt.Kt.cs){this.W.globalCompositeOperation="screen";let t="#333";const s=this.Wt.Kt.Ft.os,i=this.Wt.It-s;s&&(t=i>2500?Math.sin(i/50)>0?"#005":t:"#005"),this.gi(this.Wt.Kt.rs.Ct,t,50),this.W.globalCompositeOperation="source-over"}this.W.translate(t.x,t.y)}si(){this.Wt.$.width=window.outerWidth*H,this.Wt.$.height=window.outerHeight*H;for(const t of j.ti)t.si();this.li()}Oi(t){t.Ys?this.ji(t):this.W.drawImage(t.$,0,0)}ji(t){this.W.drawImage(t.$,this.Wt.bi.Ct.x*t.Zs,this.Wt.bi.Ct.y*(1===t.Zs?1:0),this.ni.$.width,this.ni.$.height,0,0,this.ni.$.width,this.ni.$.height)}}class G{constructor(t){this.Wt=t,this.Ct=new h}lt(){const t=this.Wt.$.width,s=this.Wt.$.height,i=this.Wt.Kt.rs.Ct,[h,e,n,o]=[this.Wt.Tt.Ht.x-t,this.Wt.Tt.Ht.y-s,i.x-t/2,this.Hi(this.Ct.y,i.y-s/1.7,-5,50)];this.Ct.x=Math.min(Math.max(0,n),h),this.Ct.y=Math.min(Math.max(0,o),e)}Hi(t,s,i,h){const e=t-s;return e<i||e>h?V(t,s+(e<i?i:h),.12):t}}function*L(t,s){let i,e,n,o,r=null;for(let u=0;u<t.length-2;u+=4){i=t[u],e=t[u+1],n=t[u+2],o=t[u+3];for(let t=0;t<1;t+=s){const s=(a=e,l=n,f=o,d=t,new h(R((c=i).x,a.x,l.x,f.x,d),R(c.y,a.y,l.y,f.y,d)));r&&(yield[r,s]),r=s}}var c,a,l,f,d}function R(t,s,i,h,e){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*s+3*(1-e)*Math.pow(e,2)*i+Math.pow(e,3)*h}const D=["400 70 0-2-6l14 1c12 5-19 13-8 34 25 3 25 6 48 1l15-2 0-3c6 0 12 4 32-1 2 4-4 5 0 11dl7 0dc4-8-3-4 0-11 9-4 14 0 23-1-1 8-6 8-3 13d13-5 7 4 21-1d2-5-4-5-1-10 17 4 78-1 81 2l0 13dc19 0 11 18 33 15d48 2 57-6 102 0l0-11c10-1 23 3 43 5l-1 21-406 1czzm253 26c10 2 16-6 18-2l0 7 8 0 0 9 8 0 0 10-15 0-19-15czzzC138 16C310 20C251 29C228 32C184 8C350 24dpv314 43dv305 43v165 24v184 18v350 36V314 31dV305 31dV217 21s158s295s91s347s223","400 120 0-1 59c19 1 28 8 50 2l51 1 1 33d11 0d0-28c44-5 42 5 83 4 5-19-18-25-17-34 18 4 19-2 26 0l-1 26 32 2dc9 12 0 19 34 20 25 0 41-3 40-14d-2-8-66-7-70-15l3-14c49 10 62-1 76 0d31 9 35 10 59 3dl24 0 0 76-402 0czm335 33l-10 3 0-9c13-6 16-2 22-2 20 1 35 24-1 8zzm47 37c11-2 27-1 28 0l-28 6czB181 65C299 72C379 13C67 23C67 40C110 71C110 90pP252 76P266 79P291 78P255 76P294 78P341 21P347 17P353 13dP60 22dP36 50dP102 85h365 20h103 63h110 76H376 8dv317 43dv274 75dv281 81v293 68v366 31v21 53v80 40dV287 79dV254 61dV378 40dV376 17dV361 23dV62 29s311s352s230s159s94","250 120-1 0 18l27 0c-14 54-8 50 8 51d24-14 35-5 36-4 9 26 17 24 40 24 57-10 91-24 90-38-1-12 6-23 51-25dl0 94-252 0czzzm50-1dl200 0d-1 11c-8 2-41 8-59 12-17 6-20 23-27 29-6 17-32 8-48 8-22-6-40-10-57-20zB38 55B78 57B123 70B166 69B196 36C38 33C38 43C38 23dpH194 44dv211 18v211 32dV100 62V152 74","250 120 110-1 114l38 0c-19-32 1-32-4-60l37 0-8 59 55 0dc45-13 52-19 55-28 2-7-9-10-7-19dl18 0c-6 14 2 14-1 22 23-5 35 2 49 0d-13-39-1-49-3-70dl23-1 0 107-251-3czzzm-1-1l61 1dc-31 11-42 52-43 57d-1 28-10 24-12 42l-6 0czdm84 101dl0-52c25-8 42 3 66-1d-1 15 3 17 5 29d-42-11-28-24-52-17-11 20-4 23-11 41zzB17 107B137 87B102 97B220 79C18 70C10 86C95 103C155 29C108 62C195 7dpP71 57dP195 17h26 92dh81 65h71 75h81 84H17 82H71 94dH105 65dv23 97dv91 105v114 66dv33 68ds42s177","250 120 50 0 78l34 0dc1 21 27 15 64 14 18-1 7-36 24-45d25 8 50 14 129 13l0 60-251 0czdm29 68l-8-58dc35 3 59 17 59 29d-24-7-27 10-22 13 12 4 16-3 32-2l-3 18dczdm132-2dl77 1 8 27c-36 2-64 5-85 5zB44 85B92 71C63 89C63 46C44 4C210 28C131 4C225 40G71 84G135 49G171 31G197 29pP63 48P108 38dP200 39P132 8dh63 92h71 82h175 41v78 49v92 37v154 32dV58 86V76 82dV175 32V202 33s127","250 120 50-1 62l28 0 224-30 0 89-251 0czzzm-1 37l0-38d252 0d0 12c-117 5-171 16-193 22z"],F="mlczpdsCGB";class ${constructor(t,s){this.Wt=t,this.d=s,this.Ti=0}Gi(){this.next();const t=[],s=[],i=[],h=[];this.Wt.Tt={Ht:this.Li(),Ri:this.Di(),di:t,Mi:s,Fi:i,Is:h};let e="m",n=null,o=this.d[this.Ti-1],r=!1;for(;o;){if(F.includes(o)){if("d"===o){r=!r,o=this.next();continue}"z"===(e=o)&&(t.push({type:3,Ms:!1}),this.pt(this.Ct,n,r)),o=this.next();continue}if(" "===o){o=this.next();continue}let c,a=[];switch(e){case"m":this.Ct=this.Li(),n=this.Ct.v(),t.push({type:0,points:[n],Ms:r}),e="l";break;case"l":a=[this.Ct.v(),this.Ct.g(this.Li()).v()],t.push({type:1,points:[a[1]],Ms:r}),this.pt(a[0],a[1],r,f|d);break;case"c":const l=this.Ct.v();a=[this.Ct.v().g(this.Li()),this.Ct.v().g(this.Li()),this.Ct.g(this.Li()).v()],t.push({type:2,points:a,Ms:r});const u=L([l].concat(a),.1);for(const[t,s]of u)this.pt(t,s,r,f|d);break;case"p":this.Ti++,c=this.Li();const M=new Map([["P",[15,5]],["h",[40,10]],["H",[80,10]],["v",[10,40]],["V",[10,80]]]),[w,p]=M.get(o);s.push({x:c.x-w,y:c.y-p,w:2*w,wi:2*p,Ms:r}),this.$i(c,w,p,r);break;case"s":const m=this.Di();i.push(m);break;case"C":c=this.Li();const z=this.Wt.Gt.ks[this.Wt.Gt.Tt]||[];h.push({Ct:c,type:0,Cs:z.includes(h.length),gt:20});break;case"G":c=this.Li(),h.push({Ct:c,type:1,Cs:!1,gt:25});break;case"B":c=this.Li(),h.push({Ct:c,type:2,Cs:!1,gt:25})}o=this.d[this.Ti-1]}}$i(t,s,i,e){const[n,o,r,c]=[t.v().g(new h(-s,-i)),t.v().g(new h(s,-i)),t.v().g(new h(s,i)),t.v().g(new h(-s,i))],a=s>30?f:0;this.pt(n,o,e,a),this.pt(o,r,e,a),this.pt(r,c,e,a),this.pt(c,n,e,a)}Li(){return new h(this.Di(),this.Di())}Di(){let t=this.d[this.Ti-1],s=this.next();for(;s>="0"&&s<="9";)t+=s,s=this.next();return 10*parseFloat(t)}next(){return this.d[this.Ti++]}pt(t,s,i,h=0){i&&(h=0),this.Wt.Ft.pt({zt:t,vt:s,$t:l|h,Ms:i})}}class W{constructor(t,s){this.Es=t,this.$=s,this.It=0,this.dt=new m,this.Ft=new g,this.Ci=new k,this.Nt=new x(this),this.zs=new O(this.Es),this.ei=new T(this),this.bi=new G(this),this.zs.init()}qs(t){this.Ft.yt(),this.Gt=t,function(t,s){const i=D[s];new $(t,i).Gi()}(this,t.Tt),t.Ct||(t.Ct=new h(150,this.Tt.Ri)),this.Wi(),this.ei.init(),this.Ci.Ot(this)}Wi(){const t=this.Gt,s=this.Ft.Vt(new h(t.Ct.x,t.Ct.y-100),new h(t.Ct.x,this.Tt.Ht.y));t.Ct.y=s.y-10,this.Kt=new A(this,new h(t.Ct.x,t.Ct.y))}Ni(){this.Gt.Ct=this.Kt.rs.Ct.v(),B(this.Gt)}lt(t){this.It+=t,this.dt.lt(this.It),this.Kt.lt(),this.Nt.lt();const s=this.Kt.rs.Ct;for(const t of this.Tt.Fi)t>this.Gt.Ct.x&&s.x>t&&this.Ni();if(s.x>this.Tt.Ht.x+10){if(this.Gt.Tt++,this.Gt.Tt===D.length)return this.Es.Ii=!0,void this.Es.Js.finish(this.Gt);this.Gt.Ct=null,B(this.Gt),this.qs(this.Gt)}}}class N{constructor(t){this.qi=document.getElementsByTagName("t")[0],this.Ei=document.getElementById("o"),this.Ji=document.getElementById("c"),this.Xi=document.getElementById("n"),this.Ki=document.getElementById("f"),this.Qi=document.getElementById("p"),this.Ui=document.getElementById("d"),this.Yi=document.getElementById("r"),this.mode=0,this.Ji.addEventListener("click",()=>t.Qs()),this.Xi.addEventListener("click",()=>t.Ks())}Zi(){this.qi.classList.remove("r"),this.Ei.classList.add("r"),this.Ki.classList.add("r"),this.Yi.classList.add("r")}show(){this.Zi(),this.Ei.classList.remove("r")}hide(){this.qi.classList.add("r")}finish(t){this.Zi(),this.mode=1,this.Ki.classList.remove("r"),this.Qi.innerText=Object.values(t.ks).reduce((t,s)=>t+s.length,0).toString(),this.Ui.innerText=localStorage.getItem("tul_d")||"0"}Xs(){this.mode=2,this.Ki.classList.add("r"),this.Yi.classList.remove("r")}}class I{constructor(t){this.Ii=!0,this.Wt=new W(this,t),this.Js=new N(this)}start(){this.Wt.qs(S())}Qs(){this.Ii=!this.Ii,this.Ii?this.Js.show():this.Js.hide()}Ks(){this.Js.mode=0,localStorage.removeItem("tul_d"),localStorage.removeItem("tul_s"),this.start(),this.Ii=!1,this.Js.hide()}}let q=0;i.d(s,"tick",function(){return K});let E=0;const J=1e3/60;let X;function K(t){const s=t-E,i=Math.floor(s/J);if(E+=i*J,!X.Ii)for(let t=0;t<i;t++)X.Wt.lt(J);X.Wt.bi.lt(),X.Wt.ei.F(),requestAnimationFrame(K),function(t){if(t-q>100){q=t;const s=170+40*Math.sin(t/631)+60*Math.cos(t/487)+30*Math.sin(t/227);zzfx(.015,2,s,1.5,0,0,5,.1,0)}}(E)}!async function(){await w();const t=document.getElementsByTagName("canvas")[0];(X=new I(t)).start(),requestAnimationFrame(K),window.addEventListener("resize",()=>X.Wt.ei.si())}()}]);</script></body></html>